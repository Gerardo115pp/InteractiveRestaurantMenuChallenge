"use strict";(self.webpackChunkexpress_lunch_delivery_exercise_1=self.webpackChunkexpress_lunch_delivery_exercise_1||[]).push([[511],{797:(e,t,n)=>{var r=n(661),a=n(278);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}new(i((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addItem=function(e){t.cart_items[e.name]||(t.cart_items[e.name]={count:0,price:e.price}),t.cart_items[e.name].count++,r.Z.writeToGeneric({owner:"CART",field:"CART_ITEMS",value:t.cart_items}),t.updateComponent()},this.createCartItemTile=function(){var e=document.createElement("h3");return e.innerText="Order Details",e.id="cart-title",e},this.createCartItemSearchBar=function(){var e=document.createElement("div");return e.id="cart-search-bar-container",e.innerHTML='\n            <input type="text" id="cart-search-bar" />\n            <div id="cart-search-bar-btn">Add</div>\n        ',e},this.createCartItemContent=function(){var e=document.createDocumentFragment(),n=document.createElement("div");n.id="cart-content";for(var r=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}),a=0,c=function(){var e,c=o[i],d=t.cart_items[c].count*t.cart_items[c].price,s=document.createElement("div");s.classList.add("cart-item");var m=document.createElement("span");m.classList.add("cart-item-label"),m.innerText="".concat(c," (").concat(t.cart_items[c].count||"Wierd",") ").concat(r.format(t.cart_items[c].price),"c/u"),s.appendChild(m);var l=document.createElement("span");l.classList.add("cart-item-total"),l.innerText="".concat(r.format(t.cart_items[c].count*t.cart_items[c].price)),s.appendChild(l);var u=document.createElement("span");(e=u.classList).add.apply(e,["material-symbols-outlined","cart-item-remove-btn"]),u.innerText="delete_forever",u.onclick=function(){return t.removeItem(c)},s.appendChild(u),n.appendChild(s),a+=d},i=0,o=Object.keys(t.cart_items);i<o.length;i++)c();e.appendChild(n);var d=document.createElement("div");return d.id="cart-total",d.innerHTML="\n            <span>Total:</span>\n            <span>".concat(r.format(a),"</span>\n        "),e.appendChild(d),e},this.createCartActions=function(){var e=document.createElement("div");e.id="cart-actions-container";var n=document.createElement("div");n.id="place-order-btn",n.classList.add("cart-action"),n.innerText="Place Order",e.appendChild(n);var r=document.createElement("div");return r.id="clear-cart-btn",r.classList.add("cart-action"),r.innerText="Clear",r.onclick=t.resetItems,e.appendChild(r),e},this.draw=function(){var e=document.createElement("div");e.id="cart-component";var n=t.createCartItemTile();e.appendChild(n);var r=t.createCartItemSearchBar();e.appendChild(r);var a=t.createCartItemContent();e.appendChild(a);var c=t.createCartActions();e.appendChild(c),document.getElementById("cart-container").appendChild(e)},this.init=function(){t.draw(),document.addEventListener(a.Z.ITEM_ADDED_TO_CART,(function(e){return t.addItem(e.detail)}))},this.resetItems=function(){t.cart_items={},r.Z.writeToGeneric({owner:"CART",field:"CART_ITEMS",value:t.cart_items}),t.updateComponent()},this.removeItem=function(e){console.log("removing item",e),console.log("this.cart_items",t.cart_items),t.cart_items[e]&&(delete t.cart_items[e],r.Z.writeToGeneric({owner:"CART",field:"CART_ITEMS",value:t.cart_items})),t.updateComponent()},this.updateComponent=function(){var e=document.getElementById("cart-component");null==e||e.remove(),t.draw()};var n=r.Z.readFromGeneric({owner:"CART",field:"CART_ITEMS"});console.log("last_cart",n),this.cart_items=n||{},this.init()})))}},e=>{e(e.s=797)}]);